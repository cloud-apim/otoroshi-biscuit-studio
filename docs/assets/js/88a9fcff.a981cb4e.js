"use strict";(self.webpackChunkotoroshi_biscuit_studio_documentation=self.webpackChunkotoroshi_biscuit_studio_documentation||[]).push([[524],{63078:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"plugins/keypairsexposition","title":"Exposing Biscuit Public Keys","description":"Biscuit tokens rely on public key cryptography for secure, decentralized authorization. To enable verification, public keys need to be exposed to services that will validate Biscuit tokens.","source":"@site/docs/plugins/keypairsexposition.mdx","sourceDirName":"plugins","slug":"/plugins/keypairsexposition","permalink":"/otoroshi-biscuit-studio/docs/plugins/keypairsexposition","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Client Credentials plugin","permalink":"/otoroshi-biscuit-studio/docs/plugins/clientcredentials"},"next":{"title":"Biscuit User Extractor plugin","permalink":"/otoroshi-biscuit-studio/docs/plugins/biscuit-user-extractor copy"}}');var t=n(74848),o=n(28453);n(16438);const r={sidebar_position:4},l="Exposing Biscuit Public Keys",c={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Plugin configuration",id:"plugin-configuration",level:2},{value:"How Public Keys Are Exposed",id:"how-public-keys-are-exposed",level:2},{value:"Example Public Key Exposition Output",id:"example-public-key-exposition-output",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"exposing-biscuit-public-keys",children:"Exposing Biscuit Public Keys"})}),"\n",(0,t.jsx)(i.p,{children:"Biscuit tokens rely on public key cryptography for secure, decentralized authorization. To enable verification, public keys need to be exposed to services that will validate Biscuit tokens."}),"\n",(0,t.jsx)(i.p,{children:"This guide explains how to configure public key exposition in an Otoroshi environment using the Biscuit extension."}),"\n",(0,t.jsx)(i.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(i.p,{children:"To expose your Biscuit public keys, you need to create a dedicated endpoint in your API gateway."}),"\n",(0,t.jsx)(i.p,{children:"You can use the recommended URL for this exposition :"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"/.well-known/biscuit-web-keys\n"})}),"\n",(0,t.jsx)(i.p,{children:"This endpoint will serve the list of public keys that can be used to verify Biscuit tokens issued by your system."}),"\n",(0,t.jsx)(i.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.strong,{children:"Create one Biscuit KeyPair"})}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Go to the ",(0,t.jsx)(i.strong,{children:"Biscuit keypairs"})," section in the Otoroshi Admin UI."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["You can follow ",(0,t.jsx)(i.a,{href:"/docs/entities/keypairs",children:"this guide"})," to help you to create your first Biscuit Keypair."]}),"\n",(0,t.jsxs)(i.ol,{start:"2",children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Create a Route in Otoroshi"}),":"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Go to the ",(0,t.jsx)(i.strong,{children:"Routes"})," section in the Otoroshi Admin UI."]}),"\n",(0,t.jsxs)(i.li,{children:["Add a new route with the path ",(0,t.jsx)(i.code,{children:"/.well-known/biscuit-web-keys"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Enable Public Key Exposition"}),":"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Add the ",(0,t.jsx)(i.code,{children:"Cloud APIM - Expose Biscuit public keys"}),"plugin to your route."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"plugin-configuration",children:"Plugin configuration"}),"\n",(0,t.jsx)(i.p,{children:"Public keys are selected for exposition based on the following rules:"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Defining Authorized Public Keys"})," (Optional):"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"You can explicitly list authorized public keys in the configuration."}),"\n",(0,t.jsx)(i.li,{children:"Only the keys in this list will be exposed."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Leaving the Authorized List Blank"}),":"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["If you do not specify an authorized keys list, ",(0,t.jsx)(i.strong,{children:"all keys"})," can be exposed."]}),"\n",(0,t.jsxs)(i.li,{children:["However, each key ",(0,t.jsx)(i.strong,{children:"must"})," have the ",(0,t.jsx)(i.strong,{children:'"Expose this public key"'})," flag enabled to be included."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"how-public-keys-are-exposed",children:"How Public Keys Are Exposed"}),"\n",(0,t.jsxs)(i.p,{children:["Once configured, Otoroshi will expose public keys in JSON format at the ",(0,t.jsx)(i.code,{children:"/.well-known/biscuit-web-keys"})," endpoint."]}),"\n",(0,t.jsx)(i.p,{children:"Any client or service that needs to verify Biscuit tokens can retrieve the list of valid public keys from this endpoint."}),"\n",(0,t.jsx)(i.h2,{id:"example-public-key-exposition-output",children:"Example Public Key Exposition Output"}),"\n",(0,t.jsx)(i.p,{children:"When configured correctly, the system will expose public keys in the following JSON format:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",children:'{\n  "items": [\n    {\n      "algorithm": "ed25519",\n      "key_bytes": "B8453EA97EAF3D6A24FCC63D1317225BE9AAB1ABF26FBEFE8A34FE5BF39BFA00",\n      "key_id": "biscuit-keypair_6a3a5de9-b2ef-4bae-9422-9d644ec3b419",\n      "issuer": "Otoroshi"\n    },\n    {\n      "algorithm": "ed25519",\n      "key_bytes": "294DC8ED8EF8C491DC9632EDDD827F81384325A6C6DEFBC643F6EBCF41D155BA",\n      "key_id": "biscuit-keypair_82167e67-e820-402f-a564-c4cd1b35832f",\n      "issuer": "Otoroshi"\n    }\n  ]\n}\n'})})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},16438:(e,i,n)=>{n(96540),n(74848)},28453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>l});var s=n(96540);const t={},o=s.createContext(t);function r(e){const i=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);