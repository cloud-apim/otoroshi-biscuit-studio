"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[287],{39956:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"plugins/verifiers","title":"Verifier plugin","description":"Example Request Before Using a Biscuit Verifier","source":"@site/docs/plugins/verifiers.mdx","sourceDirName":"plugins","slug":"/plugins/verifiers","permalink":"/otoroshi-biscuit-studio/docs/plugins/verifiers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Plugins","permalink":"/otoroshi-biscuit-studio/docs/category/plugins"},"next":{"title":"Attenuator plugin","permalink":"/otoroshi-biscuit-studio/docs/plugins/attenuators"}}');var n=t(74848),s=t(28453);t(89229);const o={sidebar_position:1},c="Verifier plugin",a={},l=[{value:"<strong>Example Request Before Using a Biscuit Verifier</strong>",id:"example-request-before-using-a-biscuit-verifier",level:3},{value:"<strong>Original Request (Token in Header)</strong>",id:"original-request-token-in-header",level:4},{value:"<strong>Using a Biscuit Verifier</strong>",id:"using-a-biscuit-verifier",level:3},{value:"Step 1 : Create the Otoroshi Route",id:"step-1--create-the-otoroshi-route",level:3},{value:"Step 2 : Select the Biscuit verifier plugin",id:"step-2--select-the-biscuit-verifier-plugin",level:3},{value:"Step 3 : Add the plugin to your Route",id:"step-3--add-the-plugin-to-your-route",level:3},{value:"Step 4 : Configure the Plugin",id:"step-4--configure-the-plugin",level:3},{value:"Example : Verifier Plugin configuration",id:"example--verifier-plugin-configuration",level:2}];function u(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"verifier-plugin",children:"Verifier plugin"})}),"\n",(0,n.jsx)(i.h3,{id:"example-request-before-using-a-biscuit-verifier",children:(0,n.jsx)(i.strong,{children:"Example Request Before Using a Biscuit Verifier"})}),"\n",(0,n.jsx)(i.h4,{id:"original-request-token-in-header",children:(0,n.jsx)(i.strong,{children:"Original Request (Token in Header)"})}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-http",children:"GET /api/resource HTTP/1.1\nHost: example.com\nAuthorization: Biscuit BISCUIT_TOKEN...originalTokenData\n"})}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"using-a-biscuit-verifier",children:(0,n.jsx)(i.strong,{children:"Using a Biscuit Verifier"})}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Extract Token"}),": The ",(0,n.jsx)(i.code,{children:"Authorization"})," header contains the Biscuit token."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Create a Verifier"}),": Instantiate a Biscuit verifier and attach specific constraints (e.g., check user roles, request path, or expiration)."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Validate the Token"}),": Use the verifier to validate the token against the attached constraints. If valid, proceed; otherwise, deny the request."]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"step-1--create-the-otoroshi-route",children:"Step 1 : Create the Otoroshi Route"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:t(33844).A+"",width:"2824",height:"1568"})}),"\n",(0,n.jsx)(i.h3,{id:"step-2--select-the-biscuit-verifier-plugin",children:"Step 2 : Select the Biscuit verifier plugin"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:t(4848).A+"",width:"2824",height:"1568"})}),"\n",(0,n.jsx)(i.h3,{id:"step-3--add-the-plugin-to-your-route",children:"Step 3 : Add the plugin to your Route"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:t(86985).A+"",width:"2824",height:"1568"})}),"\n",(0,n.jsx)(i.h3,{id:"step-4--configure-the-plugin",children:"Step 4 : Configure the Plugin"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:t(29255).A+"",width:"2824",height:"1568"})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Select a Biscuit Verifier entity you would like to use."}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Choose the location of the Biscuit Token to be extracted (in headers, in query params or in cookies)"}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Finally, choose the name of the extractor (Example : could be ",(0,n.jsx)(i.code,{children:"Authorization"})," for headers)"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"example--verifier-plugin-configuration",children:"Example : Verifier Plugin configuration"}),"\n",(0,n.jsx)(i.p,{children:"Here is a demo configuration :"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-js",children:'  {\n    "verifier_ref": "YOUR_BISCUIT_VERIFIER_ENTITY_REF",\n    "rbac_ref": "RBAC_POLICY_ENTITY_REF" // optional\n    "enforce": true, // true or false\n    "extractor_type": "header", // header, query or cookies\n    "extractor_name": "Authorization"\n  }\n'})})]})}function d(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},89229:(e,i,t)=>{t(96540),t(74848)},4848:(e,i,t)=>{t.d(i,{A:()=>r});const r=t.p+"assets/images/biscuit-verifier-route-add-plugin-7d568a1b6af13e10b0dc8b1c88ecd198.png"},86985:(e,i,t)=>{t.d(i,{A:()=>r});const r=t.p+"assets/images/biscuit-verifier-route-add-to-flow-ccd64f81d671dab87c4cdd44e497c419.png"},33844:(e,i,t)=>{t.d(i,{A:()=>r});const r=t.p+"assets/images/biscuit-verifier-route-creation-263f0559c189c136f41aeecca5b9a12e.png"},29255:(e,i,t)=>{t.d(i,{A:()=>r});const r=t.p+"assets/images/biscuit-verifier-route-setup-flow-a630526da69bbc25516fccf3575bba21.png"},28453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>c});var r=t(96540);const n={},s=r.createContext(n);function o(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);