"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[218],{86995:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"plugins/attenuators","title":"Attenuator plugin","description":"When attenuating a Biscuit token from sources such as headers, cookies, or query parameters, the process begins by extracting and validating the original token.","source":"@site/docs/plugins/attenuators.mdx","sourceDirName":"plugins","slug":"/plugins/attenuators","permalink":"/otoroshi-biscuit-studio/docs/plugins/attenuators","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Verifier plugin","permalink":"/otoroshi-biscuit-studio/docs/plugins/verifiers"},"next":{"title":"Client Credentials plugin","permalink":"/otoroshi-biscuit-studio/docs/plugins/clientcredentials"}}');var o=t(74848),r=t(28453);t(89229);const s={sidebar_position:2},a="Attenuator plugin",l={},c=[{value:"Attenuator Plugin configuration",id:"attenuator-plugin-configuration",level:2},{value:"Example",id:"example",level:2},{value:"<strong>Request Before Attenuation</strong>",id:"request-before-attenuation",level:3},{value:"<strong>Original Request (Token in Header)</strong>",id:"original-request-token-in-header",level:4},{value:"<strong>Process of Attenuation</strong>",id:"process-of-attenuation",level:3},{value:"<strong>Request After Attenuation</strong>",id:"request-after-attenuation",level:3},{value:"<strong>Attenuated Request (Token in Query Parameter)</strong>",id:"attenuated-request-token-in-query-parameter",level:4},{value:"<strong>Attenuated Request (Token in Cookie)</strong>",id:"attenuated-request-token-in-cookie",level:4},{value:"<strong>Explanation of Changes</strong>",id:"explanation-of-changes",level:3}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"attenuator-plugin",children:"Attenuator plugin"})}),"\n",(0,o.jsx)(n.p,{children:"When attenuating a Biscuit token from sources such as headers, cookies, or query parameters, the process begins by extracting and validating the original token."}),"\n",(0,o.jsx)(n.p,{children:"After validation, a new block is appended to enforce additional restrictions, such as limiting time, access rights, or endpoints."}),"\n",(0,o.jsx)(n.p,{children:'Once the token is attenuated, the request can be "cleaned" by removing the original token from its initial location.'}),"\n",(0,o.jsx)(n.p,{children:"The newly attenuated token can then be injected into the desired location, whether headers, cookies, or query parameters."}),"\n",(0,o.jsx)(n.p,{children:"This approach ensures secure, context-aware token usage while maintaining flexibility across various layers of your application."}),"\n",(0,o.jsx)(n.h2,{id:"attenuator-plugin-configuration",children:"Attenuator Plugin configuration"}),"\n",(0,o.jsx)(n.p,{children:"Here is a demo configuration :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'  {\n    "ref": "YOUR_BISCUIT_ATTENUATOR_REF",\n    "extractor_type": "header", // header, query or cookies\n    "extractor_name": "Authorization",\n    "token_replace_loc": "query", // header, query or cookies\n    "token_replace_name": "auth"\n  }\n'})}),"\n",(0,o.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(n.h3,{id:"request-before-attenuation",children:(0,o.jsx)(n.strong,{children:"Request Before Attenuation"})}),"\n",(0,o.jsx)(n.h4,{id:"original-request-token-in-header",children:(0,o.jsx)(n.strong,{children:"Original Request (Token in Header)"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /api/resource HTTP/1.1\nHost: example.com\nAuthorization: Biscuit BISCUIT_TOKEN...originalTokenData\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"process-of-attenuation",children:(0,o.jsx)(n.strong,{children:"Process of Attenuation"})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Extract Token"}),": The ",(0,o.jsx)(n.code,{children:"Authorization"})," header contains the original Biscuit token."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Append Restrictions"}),": Add a new block to the token, restricting it (e.g., limit to ",(0,o.jsx)(n.code,{children:"GET /api/resource"})," and expire in 30 minutes)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Generate New Token"}),": The new attenuated Biscuit token is created."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"request-after-attenuation",children:(0,o.jsx)(n.strong,{children:"Request After Attenuation"})}),"\n",(0,o.jsx)(n.h4,{id:"attenuated-request-token-in-query-parameter",children:(0,o.jsx)(n.strong,{children:"Attenuated Request (Token in Query Parameter)"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /api/resource?auth=biscuit:NEW_ATTENUATED_BISCUIT_TOKEN...attenuatedTokenData HTTP/1.1\nHost: example.com\n"})}),"\n",(0,o.jsx)(n.p,{children:"Alternatively:"}),"\n",(0,o.jsx)(n.h4,{id:"attenuated-request-token-in-cookie",children:(0,o.jsx)(n.strong,{children:"Attenuated Request (Token in Cookie)"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"GET /api/resource HTTP/1.1\nHost: example.com\nCookie: auth=biscuit:NEW_ATTENUATED_BISCUIT_TOKEN...attenuatedTokenData\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"explanation-of-changes",children:(0,o.jsx)(n.strong,{children:"Explanation of Changes"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Original Location"}),": The token was in the ",(0,o.jsx)(n.code,{children:"Authorization"})," header."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"New Location"}),": The attenuated token was moved to either the query parameter (",(0,o.jsx)(n.code,{children:"auth"}),") or a cookie."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Token Content"}),": The attenuated token now includes additional constraints, such as time-bound access or endpoint-specific restrictions."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This flexibility allows secure propagation of tokens while adapting to different application needs."})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},89229:(e,n,t)=>{t(96540),t(74848)},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);