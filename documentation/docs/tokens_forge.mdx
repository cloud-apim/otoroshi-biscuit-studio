---
sidebar_position: 8
---

import Terminal from '@site/src/components/Terminal';

# Biscuit Tokens Forge

## Prerequisites

- A [Biscuit KeyPair](/docs/entities/keypairs)

- A datalog : 
  - An array of biscuit Facts (could be empty)
  - An array of biscuit Checks (could be empty)
  - An array of biscuit Resources (could be empty)
  - An array of biscuit Rules (could be empty)


# Example : a Generated token with the Biscuit Forge

```javascript
{
  "id": "biscuit_token_0531505a-ae44-4022-983d-9b035786f55a",
  "name": "Biscuit Token Name",
  "description": "A simple Biscuit Token",
  "keypair_ref": "biscuit_keypair_e42033bc-f181-485f-857d-576e4728f6f9",
  "config": {
    "checks": [
      "check if time($date), $date <= 2024-12-30T19:00:10Z;"
    ],
    "facts": [
      "user(\"demo\")",
      "role(\"dev\")",
      "time(2024-12-18T20:00:00Z)"
    ],
    "resources": [],
    "rules": []
  },
  "token": "GENERATED_TOKEN_HERE",
  "tags": [],
  "kind": "biscuit.extensions.cloud-apim.com/BiscuitTokenForge"
}
```


## Generate a Biscuit Token from command line (using the Forge entity)
```bash 
curl -X POST -H 'Content-Type: application/json' 'http://otoroshi-api.oto.tools:8080/apis/biscuit.extensions.cloud-apim.com/v1/tokens-forge' -u admin-api-apikey-id:admin-api-apikey-secret -d '{
  "id": "biscuit_token_0531505a-ae44-4022-983d-9b035786f55a",
  "name": "Biscuit Token Name",
  "description": "A simple Biscuit Token",
  "keypair_ref": "biscuit_keypair_e42033bc-f181-485f-857d-576e4728f6f9",
  "config": {
    "checks": [
      "check if time($date), $date <= 2024-12-30T19:00:10Z;"
    ],
    "facts": [
      "user(\"demo\")",
      "role(\"dev\")",
      "time(2024-12-18T20:00:00Z)"
    ],
    "resources": [],
    "rules": []
  },
  "token": "GENERATED_TOKEN_HERE",
  "tags": [],
  "kind": "biscuit.extensions.cloud-apim.com/BiscuitTokenForge"
}'
```